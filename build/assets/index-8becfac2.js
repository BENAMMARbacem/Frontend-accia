import{d as I,r as n,j as e,F as y,a as l,I as d,b as k,T as o,R as S}from"./index-f451df9c.js";import{b as x,a as T}from"./index-e0ffe7f6.js";const L=t=>{const g=I(),a=new URLSearchParams(g.search).get("id"),N=async()=>{const r={text:document.getElementById("inputComment").value,postId:a},m={headers:{authorization:`Bearer ${localStorage.getItem("token")}`}};try{await x.post("api/admin/comment",r,m)}catch{console.log("error while write the comment ")}},v="665524d1465974a083b8ef69",[p,w]=n.useState(null),[i,P]=n.useState({});return n.useEffect(()=>{(async()=>{try{const r=await x.get(`/api/admin/users/profile/${v}`);P(r.data)}catch(r){console.error("Error fetching user data:",r)}})()},[]),n.useEffect(()=>{(async()=>{if(i&&i.profilePhoto)if(i.profilePhoto.url==="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png")w(i.profilePhoto.url);else try{const f=(await x.get(`/api/admin/users/profile-image/${i.profilePhoto.publicId}`,{responseType:"blob"})).data,m=new File([f],"image",{type:f.type}),s=new FileReader;s.onload=()=>{const c=s.result;w(c)},s.readAsDataURL(m)}catch(r){console.error("Error fetching user image:",r)}})()},[i]),e(y,{children:l("div",{className:"flex flex-col-2 justify-start mb-[33px] w-full",children:[e("div",{className:"flex flex-row-2  items-center justify-start w-1/6",children:e("div",{className:"bg-light_blue-100 flex flex-col h-9 items-center justify-start rounded-[50%] w-9",children:p==null?e(d,{src:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",className:"h-9 md:h-auto rounded-[50%] w-9",alt:"r"}):e(d,{className:"h-9  rounded-[50%] w-9",alt:"r",src:p})})}),e(k,{name:"textareaThree",id:"inputComment",placeholder:"Ajouter un commentaire",className:"!placeholder:text-gray-950 !text-gray-950 font-manrope p-0 text-left text-sm w-full",wrapClassName:"flex  outline outline-[1px] outline-gray-500 rounded w-[94%]",suffix:e("div",{children:e("button",{onClick:N,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",children:"commenter"})}),size:"xl",variant:"fill"})]})})};L.defaultProps={avatar:"images/img_rectangle.png",username:"User Name"};const _=t=>t.split("T")[0],z=t=>{const g=t.split("T")[1].split(":")[0],h=t.split("T")[1].split(":")[1];return`${g}:${h}`},R=t=>e(y,{children:e("div",{className:t.className,children:l("div",{className:"flex lg:flex-row flex-row gap-2 items-center justify-between w-full",children:[e("div",{className:"bg-light_blue-100 flex flex-col h-9 items-center justify-start mb-2 rounded-[50%] w-9",children:e(d,{className:"h-9 md:h-auto rounded-[50%] w-9",alt:"rectangle_Two",src:t==null?void 0:t.avatar})}),l("div",{className:"flex md:flex-1 flex-col items-start justify-start w-[94%] md:w-full",children:[l("div",{className:"flex flex-row gap-4 items-start justify-between w-[100%] md:w-full",children:[e(o,{className:"mt-[7px] text-gray-900 text-sm",size:"txtLexendSemiBold14",children:t==null?void 0:t.username}),e(o,{className:"mt-[3px] text-gray-500 text-xs",size:"txtManropeRegular12Gray500",children:`${_(t==null?void 0:t.createdAt)} | ${z(t==null?void 0:t.createdAt)} `})]}),e(o,{className:"leading-[22.00px] mt-0.5 text-blue_gray-900 text-sm w-full",size:"txtManropeRegular14Bluegray900",children:t==null?void 0:t.text})]})]})})});R.defaultProps={avatar:"images/img_rectangle_36x36.png",username:"Klara Weaver",commentDate:"10:50 AM",headline:"Nulla aute nisi quis nostrud reprehenderit nisi cillum mollit anim amet duis non esse.",content:"Eu laborum fugiat magna reprehenderit reprehenderit tempor aliquip nisi officia irure qui ad. Labore pariatur ex ut aliqua ad exercitation deserunt eu nisi do velit mollit consequat in quis. Adipisicing magna ðŸš€ðŸš€ðŸš€",likesCount:"3",repliesCount:"20"};const E=()=>{const t=I(),h=new URLSearchParams(t.search).get("id"),[a,N]=n.useState({}),[v,p]=n.useState(""),[w,i]=n.useState(!1),[P,u]=n.useState(!1),[r,f]=n.useState([]);return n.useEffect(()=>{(async()=>{try{i(!0);const c={headers:{authorization:`Bearer ${localStorage.getItem("token")||""}`}},b=await x.get(`/api/admin/post/${h}`,c);N(b.data),f(b.data.AllComments)}catch(s){console.error("Erreur lors de la rÃ©cupÃ©ration des donnÃ©es:",s)}finally{i(!1)}})()},[]),n.useEffect(()=>{const m=async()=>{if(a&&a.image&&a.image.publicID)try{u(!0);const c=(await x.get(`/api/admin/post/get-image/${a.image.publicID}`,{responseType:"blob"})).data,b=new File([c],"image",{type:c.type}),C=new FileReader;C.onload=()=>{const j=C.result;p(j)},C.readAsDataURL(b)}catch(s){console.error("Erreur lors de la rÃ©cupÃ©ration de l'image:",s)}finally{u(!1)}};a&&Object.keys(a).length!==0&&m()},[]),P||w?e(Loading,{}):e(y,{children:l("div",{className:"flex flex-col font-lexend items-center justify-start mx-auto lg:mx-0 w-full",children:[l("div",{className:"flex flex-col justify-start w-full",children:[l("div",{className:"",children:[e(d,{className:"flex font-manrope max-w-[1099px] mt-4 mx-auto md:px-5 w-full",src:v,alt:"imageThirtyFive"}),e(o,{className:"flex font-manrope max-w-[1099px] mt-6 mx-auto md:px-5 w-full text-teal-900 text-xl",size:"txtLexendSemiBold14",children:a.title&&a.title.fr?a.title.fr:"Titre non disponible"}),e(o,{className:"flex font-manrope max-w-[1099px] mt-4 mx-auto md:px-5 w-full text-gray-500 text-sm",size:"txtManropeRegular14Gray500",children:a.createdAt?T(a.createdAt):"Date non disponible"}),e(o,{className:"leading-[22.00px] text-gray-900 text-sm flex font-manrope max-w-[1099px] mt-6 mx-auto md:px-5 w-full",size:"txtManropeRegular14",children:a.description&&a.description.fr?a.description.fr:"Titre non disponible"})]}),e("div",{className:"flex md:flex-col flex-row font-manrope md:gap-5 max-w-[1099px] mt-[41px] mx-auto md:px-5 w-full",children:l("div",{className:"flex flex-row gap-5",children:[l("div",{className:"flex flex-row gap-2",children:[e(d,{className:"h-7 w-7",src:"images/img_offer.svg",alt:"offer"}),e(o,{className:"md:ml-[0] ml-[3px] md:mt-0 mt-1.5 text-light_blue-900 text-sm",size:"txtManropeRegular14Lightblue900",children:a.Likes&&a.Likes?a.Likes.length:"Titre non disponible"})]}),l("div",{className:"flex flex-row gap-2",children:[e(d,{className:"h-7 md:ml-[0] ml-[17px] w-7",src:"images/img_share1.svg",alt:"shareOne"}),e(o,{className:"md:ml-[0] ml-[3px] md:mt-0 mt-[7px] text-light_blue-900 text-sm",size:"txtManropeRegular14Lightblue900",children:"Partager"})]})]})}),e(o,{className:"md:ml-[0] ml-[193px] mr-[1162px] mt-[26px] text-gray-500 text-sm",size:"txtManropeRegular14Gray500",children:"Commentaires"}),l("div",{className:"flex flex-col font-manrope md:gap-5 max-w-[1099px] mt-[41px] mx-auto md:px-5 w-full",children:[e(L,{}),r&&r.map((m,s)=>l(y,{children:[e(R,{...m},`PostCard${s}`),e("hr",{className:"pt-5 pb-5  border-none"})]}))]})]}),e(S,{path:"/"})]})})};export{E as default};
